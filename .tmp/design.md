# è¨­è¨ˆæ›¸ - Medi_Q ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆè‡ªä½œç‰ˆï¼‰

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±
- **ä½œæˆæ—¥**: 2025-11-14
- **æ›´æ–°æ—¥**: 2025-11-30
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Draft
- **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: requirements.md (v2.0)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 1.1 å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç«¯æœ«                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          Webãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChrome/Edgeæ¨å¥¨ï¼‰                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚        Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - å—ä»˜ç”»é¢ï¼ˆQRãƒªãƒ¼ãƒ€ãƒ¼ã€æ‚£è€…æƒ…å ±è¡¨ç¤ºï¼‰          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  - ç®¡ç†ç”»é¢ï¼ˆæ‚£è€…ç®¡ç†ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ãƒã‚¹ã‚¿ï¼‰    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â†•                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒã‚¤ã‚¹                               â”‚   â”‚
â”‚  â”‚  - Webã‚«ãƒ¡ãƒ©ï¼ˆQRã‚³ãƒ¼ãƒ‰èª­å–ï¼‰                         â”‚   â”‚
â”‚  â”‚  - ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ï¼ˆéŸ³å£°å†ç”Ÿï¼‰                            â”‚   â”‚
â”‚  â”‚  - ãƒ—ãƒªãƒ³ã‚¿ï¼ˆè¨ºå¯Ÿç¥¨å°åˆ·ï¼‰                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Next.js ã‚µãƒ¼ãƒãƒ¼                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Next.js API Routes                            â”‚   â”‚
â”‚  â”‚  - /api/patients/*       ï¼ˆæ‚£è€…CRUDï¼‰                â”‚   â”‚
â”‚  â”‚  - /api/schedules/*      ï¼ˆäºˆç´„CRUDï¼‰                â”‚   â”‚
â”‚  â”‚  - /api/masters/*        ï¼ˆãƒã‚¹ã‚¿CRUDï¼‰              â”‚   â”‚
â”‚  â”‚  - /api/auth/*           ï¼ˆèªè¨¼ï¼‰                    â”‚   â”‚
â”‚  â”‚  - /api/reception/*      ï¼ˆå—ä»˜å‡¦ç†ï¼‰                â”‚   â”‚
â”‚  â”‚  - /api/voice/synthesize ï¼ˆéŸ³å£°åˆæˆï¼‰                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â†•                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        Prisma ORM                                    â”‚   â”‚
â”‚  â”‚  - å‹å®‰å…¨ãªDBæ“ä½œ                                    â”‚   â”‚
â”‚  â”‚  - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â†•                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹                           â”‚   â”‚
â”‚  â”‚  - prisma/medi_q.db                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• HTTP API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    éŸ³å£°åˆæˆã‚µãƒ¼ãƒ“ã‚¹                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        VOICEVOX Engineï¼ˆãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ï¼‰               â”‚   â”‚
â”‚  â”‚  - http://localhost:50021                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´

1. **å®Œå…¨ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œ**:
   - å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ä¾å­˜ãªã—ï¼ˆGoogle Calendarä¸è¦ï¼‰
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ä½œå¯èƒ½
   - ãƒ‡ãƒ¼ã‚¿ã¯æ–½è¨­å†…ã§å®Œçµ

2. **ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆ**:
   - Next.jsï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆï¼‰
   - SQLiteï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹DBã€ã‚µãƒ¼ãƒãƒ¼ä¸è¦ï¼‰
   - Prismaï¼ˆå‹å®‰å…¨ãªORMï¼‰

3. **æ‹¡å¼µæ€§**:
   - å°†æ¥çš„ãªPostgreSQLç§»è¡ŒãŒå®¹æ˜“ï¼ˆPrismaã«ã‚ˆã‚‹æŠ½è±¡åŒ–ï¼‰
   - APIé§†å‹•å‹ã§ä»–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆãŒå®¹æ˜“

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|----------|------|
| **Next.js** | 14.x | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆApp Routerï¼‰ |
| **React** | 18.x | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| **TypeScript** | 5.x | å‹å®‰å…¨ãªé–‹ç™º |
| **Tailwind CSS** | 3.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |

#### ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ç”¨é€” |
|-----------|------|
| **@zxing/library** | QRã‚³ãƒ¼ãƒ‰èª­å– |
| **react-webcam** | Webã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ |
| **react-big-calendar** | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIï¼ˆå€™è£œ1ï¼‰ |
| **@fullcalendar/react** | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIï¼ˆå€™è£œ2ï¼‰ |
| **react-hook-form** | ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç† |
| **zod** | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **date-fns** | æ—¥ä»˜å‡¦ç† |
| **qrcode** | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |

### 2.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|----------|------|
| **Next.js API Routes** | 14.x | APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ |
| **Prisma** | 5.x | ORM |
| **SQLite** | 3.x | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| **bcrypt** | - | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ |
| **jose** | - | JWTå‡¦ç† |

### 2.3 éŸ³å£°åˆæˆ

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| **VOICEVOX Engine** | éŸ³å£°åˆæˆAPIï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ |

### 2.4 é–‹ç™ºãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ« | ç”¨é€” |
|--------|------|
| **Vitest** | å˜ä½“ãƒ†ã‚¹ãƒˆ |
| **Playwright** | E2Eãƒ†ã‚¹ãƒˆ |
| **Prisma Studio** | DBãƒ“ãƒ¥ãƒ¼ã‚¢ |
| **ESLint + Prettier** | ã‚³ãƒ¼ãƒ‰å“è³ª |

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Patient    â”‚       â”‚   Schedule   â”‚       â”‚  Department  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚â”€â”€â”    â”‚ id (PK)      â”‚    â”Œâ”€â”€â”‚ id (PK)      â”‚
â”‚ patientCode  â”‚  â”‚    â”‚ patientId(FK)â”‚â†â”€â”€â”€â”˜  â”‚ name         â”‚
â”‚ name         â”‚  â”‚    â”‚ date         â”‚       â”‚ isDeleted    â”‚
â”‚ nameKana     â”‚  â””â”€â”€â”€â†’â”‚ startTime    â”‚       â”‚ createdAt    â”‚
â”‚ voiceTemplateâ”‚       â”‚ endTime      â”‚       â”‚ updatedAt    â”‚
â”‚ printTemplateâ”‚       â”‚ departmentId â”‚â†â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚ isDeleted    â”‚       â”‚ doctorId     â”‚â†â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ createdAt    â”‚       â”‚ waitingAreaIdâ”‚â†â”€â”€â”€â”€â” â”‚              â”‚
â”‚ updatedAt    â”‚       â”‚ note         â”‚     â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ status       â”‚     â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                       â”‚ visitedAt    â”‚     â”‚ â”‚ â”‚   Doctor   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ isDeleted    â”‚     â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WaitingArea  â”‚       â”‚ createdAt    â”‚     â”‚ â””â”€â”‚ id (PK)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚ updatedAt    â”‚     â”‚   â”‚ name       â”‚
â”‚ id (PK)      â”‚â†â”€â”€â”€â”€â”€â”€â”¤              â”‚     â”‚   â”‚ departmentIdâ”‚
â”‚ name         â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚ isDeleted  â”‚
â”‚ isDeleted    â”‚                            â”‚   â”‚ createdAt  â”‚
â”‚ createdAt    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚ updatedAt  â”‚
â”‚ updatedAt    â”‚       â”‚ScheduleExam â”‚     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
                       â”‚ id (PK)      â”‚     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ scheduleId   â”‚â†â”€â”€â”€â”€â”¤
â”‚ Examination  â”‚       â”‚ examinationIdâ”‚â†â”€â”€â”€â”€â”¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ id (PK)      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ name         â”‚
â”‚ isDeleted    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ createdAt    â”‚       â”‚    Admin     â”‚
â”‚ updatedAt    â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ id (PK)      â”‚
                       â”‚ username     â”‚
                       â”‚ passwordHash â”‚
                       â”‚ createdAt    â”‚
                       â”‚ updatedAt    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Prisma ã‚¹ã‚­ãƒ¼ãƒ

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// æ‚£è€…
model Patient {
  id             Int        @id @default(autoincrement())
  patientCode    String     @unique // QRã‚³ãƒ¼ãƒ‰å€¤ï¼ˆä¾‹: P12345ï¼‰
  name           String
  nameKana       String     // ãµã‚ŠãŒãªï¼ˆéŸ³å£°æ¡ˆå†…ç”¨ï¼‰
  voiceTemplate  String?    // ã‚«ã‚¹ã‚¿ãƒ éŸ³å£°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  printTemplate  String?    // ã‚«ã‚¹ã‚¿ãƒ å°åˆ·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  schedules      Schedule[]

  @@index([patientCode])
  @@index([isDeleted])
}

// äºˆç´„
model Schedule {
  id             Int        @id @default(autoincrement())
  patientId      Int
  date           DateTime   // äºˆç´„æ—¥ï¼ˆæ™‚åˆ»éƒ¨åˆ†ã¯00:00:00ï¼‰
  startTime      String     // é–‹å§‹æ™‚åˆ»ï¼ˆHH:mmï¼‰
  endTime        String?    // çµ‚äº†æ™‚åˆ»ï¼ˆHH:mmï¼‰
  departmentId   Int
  doctorId       Int
  waitingAreaId  Int
  note           String?    // ãƒ¡ãƒ¢
  status         String     @default("scheduled") // scheduled, visited, cancelled
  visitedAt      DateTime?  // æ¥é™¢æ—¥æ™‚
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  patient        Patient      @relation(fields: [patientId], references: [id])
  department     Department   @relation(fields: [departmentId], references: [id])
  doctor         Doctor       @relation(fields: [doctorId], references: [id])
  waitingArea    WaitingArea  @relation(fields: [waitingAreaId], references: [id])
  examinations   ScheduleExamination[]

  @@index([patientId])
  @@index([date])
  @@index([status])
  @@index([isDeleted])
}

// äºˆç´„-æ¤œæŸ» ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«
model ScheduleExamination {
  id             Int        @id @default(autoincrement())
  scheduleId     Int
  examinationId  Int

  schedule       Schedule    @relation(fields: [scheduleId], references: [id], onDelete: Cascade)
  examination    Examination @relation(fields: [examinationId], references: [id])

  @@unique([scheduleId, examinationId])
}

// è¨ºå¯Ÿç§‘
model Department {
  id             Int        @id @default(autoincrement())
  name           String
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  doctors        Doctor[]
  schedules      Schedule[]
}

// æ‹…å½“åŒ»
model Doctor {
  id             Int        @id @default(autoincrement())
  name           String
  departmentId   Int
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  department     Department @relation(fields: [departmentId], references: [id])
  schedules      Schedule[]
}

// å¾…æ©Ÿå ´æ‰€
model WaitingArea {
  id             Int        @id @default(autoincrement())
  name           String
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  schedules      Schedule[]
}

// æ¤œæŸ»é …ç›®
model Examination {
  id             Int        @id @default(autoincrement())
  name           String
  isDeleted      Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  schedules      ScheduleExamination[]
}

// ç®¡ç†è€…
model Admin {
  id             Int        @id @default(autoincrement())
  username       String     @unique
  passwordHash   String
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
}
```

### 3.3 åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆã‚·ãƒ¼ãƒ‰ï¼‰

```typescript
// prisma/seed.ts

const departments = [
  { name: 'å†…ç§‘' },
  { name: 'å¤–ç§‘' },
  { name: 'å°å…ç§‘' },
  { name: 'æ•´å½¢å¤–ç§‘' },
  { name: 'çœ¼ç§‘' },
];

const waitingAreas = [
  { name: '1éšå¾…åˆå®¤A' },
  { name: '1éšå¾…åˆå®¤B' },
  { name: '2éšå¾…åˆå®¤A' },
  { name: '2éšå¾…åˆå®¤B' },
  { name: '3éšå¾…åˆå®¤' },
];

const examinations = [
  { name: 'è¡€æ¶²æ¤œæŸ»' },
  { name: 'Xç·šæ’®å½±' },
  { name: 'MRI' },
  { name: 'CT' },
  { name: 'å¿ƒé›»å›³' },
  { name: 'è¶…éŸ³æ³¢æ¤œæŸ»' },
];
```

---

## 4. APIè¨­è¨ˆ

### 4.1 APIä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | èªè¨¼ |
|---------|---------------|------|------|
| **æ‚£è€…ç®¡ç†** ||||
| GET | `/api/patients` | æ‚£è€…ä¸€è¦§å–å¾— | è¦ |
| GET | `/api/patients/[id]` | æ‚£è€…è©³ç´°å–å¾— | è¦ |
| POST | `/api/patients` | æ‚£è€…ç™»éŒ² | è¦ |
| PUT | `/api/patients/[id]` | æ‚£è€…æ›´æ–° | è¦ |
| DELETE | `/api/patients/[id]` | æ‚£è€…å‰Šé™¤ï¼ˆè«–ç†ï¼‰ | è¦ |
| **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†** ||||
| GET | `/api/schedules` | äºˆç´„ä¸€è¦§å–å¾—ï¼ˆæœŸé–“æŒ‡å®šï¼‰ | è¦ |
| GET | `/api/schedules/[id]` | äºˆç´„è©³ç´°å–å¾— | è¦ |
| POST | `/api/schedules` | äºˆç´„ç™»éŒ² | è¦ |
| PUT | `/api/schedules/[id]` | äºˆç´„æ›´æ–° | è¦ |
| DELETE | `/api/schedules/[id]` | äºˆç´„å‰Šé™¤ï¼ˆè«–ç†ï¼‰ | è¦ |
| **ãƒã‚¹ã‚¿ç®¡ç†** ||||
| GET | `/api/masters/departments` | è¨ºå¯Ÿç§‘ä¸€è¦§ | è¦ |
| POST | `/api/masters/departments` | è¨ºå¯Ÿç§‘ç™»éŒ² | è¦ |
| PUT | `/api/masters/departments/[id]` | è¨ºå¯Ÿç§‘æ›´æ–° | è¦ |
| DELETE | `/api/masters/departments/[id]` | è¨ºå¯Ÿç§‘å‰Šé™¤ | è¦ |
| GET | `/api/masters/doctors` | æ‹…å½“åŒ»ä¸€è¦§ | è¦ |
| POST | `/api/masters/doctors` | æ‹…å½“åŒ»ç™»éŒ² | è¦ |
| PUT | `/api/masters/doctors/[id]` | æ‹…å½“åŒ»æ›´æ–° | è¦ |
| DELETE | `/api/masters/doctors/[id]` | æ‹…å½“åŒ»å‰Šé™¤ | è¦ |
| GET | `/api/masters/waiting-areas` | å¾…æ©Ÿå ´æ‰€ä¸€è¦§ | è¦ |
| POST | `/api/masters/waiting-areas` | å¾…æ©Ÿå ´æ‰€ç™»éŒ² | è¦ |
| PUT | `/api/masters/waiting-areas/[id]` | å¾…æ©Ÿå ´æ‰€æ›´æ–° | è¦ |
| DELETE | `/api/masters/waiting-areas/[id]` | å¾…æ©Ÿå ´æ‰€å‰Šé™¤ | è¦ |
| GET | `/api/masters/examinations` | æ¤œæŸ»é …ç›®ä¸€è¦§ | è¦ |
| POST | `/api/masters/examinations` | æ¤œæŸ»é …ç›®ç™»éŒ² | è¦ |
| PUT | `/api/masters/examinations/[id]` | æ¤œæŸ»é …ç›®æ›´æ–° | è¦ |
| DELETE | `/api/masters/examinations/[id]` | æ¤œæŸ»é …ç›®å‰Šé™¤ | è¦ |
| **èªè¨¼** ||||
| POST | `/api/auth/login` | ãƒ­ã‚°ã‚¤ãƒ³ | ä¸è¦ |
| POST | `/api/auth/logout` | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ | è¦ |
| GET | `/api/auth/session` | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèª | è¦ |
| PUT | `/api/auth/password` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ | è¦ |
| **å—ä»˜å‡¦ç†** ||||
| POST | `/api/reception/checkin` | æ¥é™¢å‡¦ç† | ä¸è¦ |
| **éŸ³å£°åˆæˆ** ||||
| GET | `/api/voice/synthesize` | éŸ³å£°ã‚¨ãƒ³ã‚¸ãƒ³çŠ¶æ…‹ç¢ºèª | ä¸è¦ |
| POST | `/api/voice/synthesize` | éŸ³å£°åˆæˆ | ä¸è¦ |

### 4.2 APIè©³ç´°

#### 4.2.1 æ¥é™¢å‡¦ç† API

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/reception/checkin`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "patientCode": "P12345"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰**:
```json
{
  "success": true,
  "data": {
    "patient": {
      "id": 1,
      "patientCode": "P12345",
      "name": "å±±ç”°å¤ªéƒ",
      "nameKana": "ã‚„ã¾ã ãŸã‚ã†"
    },
    "schedule": {
      "id": 10,
      "date": "2025-11-30",
      "startTime": "10:00",
      "department": { "id": 1, "name": "å†…ç§‘" },
      "doctor": { "id": 1, "name": "ç”°ä¸­èŠ±å­" },
      "waitingArea": { "id": 3, "name": "2éšå¾…åˆå®¤A" },
      "examinations": [
        { "id": 1, "name": "è¡€æ¶²æ¤œæŸ»" },
        { "id": 3, "name": "MRI" }
      ]
    },
    "voiceText": "ã‚ˆã†ã“ãã€ã‚„ã¾ã ãŸã‚ã†æ§˜ã€‚å†…ç§‘ã€ç”°ä¸­èŠ±å­å…ˆç”Ÿã®è¨ºå¯Ÿã§ã™ã€‚2éšå¾…åˆå®¤Aã§ãŠå¾…ã¡ãã ã•ã„ã€‚",
    "visitedAt": "2025-11-30T09:45:00.000Z"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆäºˆç´„ãªã—ï¼‰**:
```json
{
  "success": false,
  "error": {
    "code": "NO_SCHEDULE",
    "message": "æœ¬æ—¥ã®è¨ºå¯Ÿäºˆå®šãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
  }
}
```

#### 4.2.2 äºˆç´„ä¸€è¦§å–å¾— API

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/schedules`

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ |
|-----------|-----|------|------|
| startDate | string | Yes | é–‹å§‹æ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| endDate | string | Yes | çµ‚äº†æ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| patientId | number | No | æ‚£è€…IDçµã‚Šè¾¼ã¿ |
| departmentId | number | No | è¨ºå¯Ÿç§‘çµã‚Šè¾¼ã¿ |
| status | string | No | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹çµã‚Šè¾¼ã¿ |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": [
    {
      "id": 10,
      "date": "2025-11-30",
      "startTime": "10:00",
      "endTime": "10:30",
      "status": "scheduled",
      "patient": {
        "id": 1,
        "patientCode": "P12345",
        "name": "å±±ç”°å¤ªéƒ"
      },
      "department": { "id": 1, "name": "å†…ç§‘" },
      "doctor": { "id": 1, "name": "ç”°ä¸­èŠ±å­" },
      "waitingArea": { "id": 3, "name": "2éšå¾…åˆå®¤A" },
      "examinations": [
        { "id": 1, "name": "è¡€æ¶²æ¤œæŸ»" }
      ]
    }
  ]
}
```

---

## 5. ç”»é¢è¨­è¨ˆ

### 5.1 ç”»é¢ä¸€è¦§

#### å—ä»˜ç”»é¢ï¼ˆèªè¨¼ä¸è¦ï¼‰

| ç”»é¢ID | ç”»é¢å | ãƒ‘ã‚¹ | èª¬æ˜ |
|--------|--------|------|------|
| R-001 | QRå—ä»˜ | `/` | QRã‚³ãƒ¼ãƒ‰èª­å–ã€æ‚£è€…æƒ…å ±è¡¨ç¤º |

#### ç®¡ç†ç”»é¢ï¼ˆèªè¨¼å¿…è¦ï¼‰

| ç”»é¢ID | ç”»é¢å | ãƒ‘ã‚¹ | èª¬æ˜ |
|--------|--------|------|------|
| A-001 | ãƒ­ã‚°ã‚¤ãƒ³ | `/admin/login` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› |
| A-002 | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | `/admin` | æœ¬æ—¥ã®äºˆç´„ä¸€è¦§ã€çµ±è¨ˆ |
| A-003 | æ‚£è€…ä¸€è¦§ | `/admin/patients` | æ‚£è€…æ¤œç´¢ãƒ»ä¸€è¦§ |
| A-004 | æ‚£è€…è©³ç´° | `/admin/patients/[id]` | æ‚£è€…ç·¨é›†ã€QRã‚³ãƒ¼ãƒ‰è¡¨ç¤º |
| A-005 | æ‚£è€…ç™»éŒ² | `/admin/patients/new` | æ–°è¦æ‚£è€…ç™»éŒ² |
| A-006 | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | `/admin/schedules` | æœˆ/é€±ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º |
| A-007 | äºˆç´„è©³ç´° | `/admin/schedules/[id]` | äºˆç´„ç·¨é›† |
| A-008 | äºˆç´„ç™»éŒ² | `/admin/schedules/new` | æ–°è¦äºˆç´„ç™»éŒ² |
| A-009 | ãƒã‚¹ã‚¿ç®¡ç† | `/admin/masters` | è¨ºå¯Ÿç§‘ãƒ»æ‹…å½“åŒ»ãƒ»å¾…æ©Ÿå ´æ‰€ãƒ»æ¤œæŸ»é …ç›® |
| A-010 | è¨­å®š | `/admin/settings` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ |

### 5.2 ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### 5.2.1 å—ä»˜ç”»é¢ï¼ˆ/ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ãƒ­ã‚´] Medi_Q              ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­ â—           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚        è¨ºå¯Ÿåˆ¸ã®QRã‚³ãƒ¼ãƒ‰ã‚’ã‹ã–ã—ã¦ãã ã•ã„               â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                                              â”‚     â”‚
â”‚  â”‚          [ã‚«ãƒ¡ãƒ©æ˜ åƒã‚¨ãƒªã‚¢]                   â”‚     â”‚
â”‚  â”‚                                              â”‚     â”‚
â”‚  â”‚                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                        â”‚
â”‚  ğŸ“· ã‚«ãƒ¡ãƒ©: æº–å‚™å®Œäº†  ğŸ”Š éŸ³å£°: æœ‰åŠ¹  ğŸ“… DB: æ¥ç¶šæ¸ˆã¿    â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.2 ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ãƒ­ã‚´] Medi_Q ç®¡ç†ç”»é¢                    [ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                         â”‚
â”‚  ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ â”‚   [ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢]              â”‚
â”‚  ğŸ‘¥ æ‚£è€…ç®¡ç† â”‚                                         â”‚
â”‚  ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ â”‚                                         â”‚
â”‚  âš™ï¸ ãƒã‚¹ã‚¿   â”‚                                         â”‚
â”‚  ğŸ”§ è¨­å®š     â”‚                                         â”‚
â”‚              â”‚                                         â”‚
â”‚              â”‚                                         â”‚
â”‚              â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.3 ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ï¼ˆ/admin/schedulesï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†                      [+ æ–°è¦äºˆç´„]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [< å‰æœˆ] [ä»Šæœˆ: 2025å¹´11æœˆ] [æ¬¡æœˆ >]  [æœˆ] [é€±] [æ—¥]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ—¥    æœˆ    ç«    æ°´    æœ¨    é‡‘    åœŸ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚      â”‚      â”‚      â”‚      â”‚  1   â”‚  2   â”‚
â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚  3   â”‚  4   â”‚  5   â”‚  6   â”‚  7   â”‚  8   â”‚  9   â”‚
â”‚      â”‚ â– â– â–   â”‚ â– â–    â”‚ â–     â”‚ â– â– â– â–  â”‚ â– â–    â”‚      â”‚
â”‚      â”‚ 3ä»¶  â”‚ 2ä»¶  â”‚ 1ä»¶  â”‚ 4ä»¶  â”‚ 2ä»¶  â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¤
â”‚  ...                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.4 æ‚£è€…è©³ç´°ç”»é¢ï¼ˆ/admin/patients/[id]ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‚£è€…è©³ç´°                              [ç·¨é›†] [å‰Šé™¤]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  åŸºæœ¬æƒ…å ±                        â”‚
â”‚  â”‚                 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚  â”‚    [QRã‚³ãƒ¼ãƒ‰]   â”‚  æ‚£è€…ID:  P12345                 â”‚
â”‚  â”‚                 â”‚  æ°å:    å±±ç”°å¤ªéƒ               â”‚
â”‚  â”‚   P12345        â”‚  ãµã‚ŠãŒãª: ã‚„ã¾ã ãŸã‚ã†          â”‚
â”‚  â”‚                 â”‚                                  â”‚
â”‚  â”‚  [ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰] â”‚  éŸ³å£°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)  â”‚
â”‚  â”‚  [å°åˆ·]         â”‚  å°åˆ·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                        â”‚
â”‚  äºˆç´„å±¥æ­´                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  2025/11/30 10:00 | å†…ç§‘ | ç”°ä¸­èŠ±å­å…ˆç”Ÿ | æ¥é™¢æ¸ˆã¿    â”‚
â”‚  2025/12/15 14:00 | å†…ç§‘ | ç”°ä¸­èŠ±å­å…ˆç”Ÿ | äºˆå®š        â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 6.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
app/
â”œâ”€â”€ (reception)/           # å—ä»˜ç”»é¢ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆèªè¨¼ä¸è¦ï¼‰
â”‚   â”œâ”€â”€ page.tsx          # QRå—ä»˜ç”»é¢
â”‚   â””â”€â”€ layout.tsx        # å—ä»˜ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ admin/                 # ç®¡ç†ç”»é¢ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆèªè¨¼å¿…è¦ï¼‰
â”‚   â”œâ”€â”€ layout.tsx        # ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰
â”‚   â”œâ”€â”€ page.tsx          # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx      # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
â”‚   â”œâ”€â”€ patients/
â”‚   â”‚   â”œâ”€â”€ page.tsx      # æ‚£è€…ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx  # æ‚£è€…ç™»éŒ²
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx  # æ‚£è€…è©³ç´°
â”‚   â”œâ”€â”€ schedules/
â”‚   â”‚   â”œâ”€â”€ page.tsx      # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx  # äºˆç´„ç™»éŒ²
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx  # äºˆç´„è©³ç´°
â”‚   â”œâ”€â”€ masters/
â”‚   â”‚   â””â”€â”€ page.tsx      # ãƒã‚¹ã‚¿ç®¡ç†
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx      # è¨­å®š
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ patients/
â”‚   â”‚   â”œâ”€â”€ route.ts      # GET(ä¸€è¦§), POST(ç™»éŒ²)
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ route.ts  # GET, PUT, DELETE
â”‚   â”œâ”€â”€ schedules/
â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”œâ”€â”€ masters/
â”‚   â”‚   â”œâ”€â”€ departments/
â”‚   â”‚   â”œâ”€â”€ doctors/
â”‚   â”‚   â”œâ”€â”€ waiting-areas/
â”‚   â”‚   â””â”€â”€ examinations/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login/route.ts
â”‚   â”‚   â”œâ”€â”€ logout/route.ts
â”‚   â”‚   â”œâ”€â”€ session/route.ts
â”‚   â”‚   â””â”€â”€ password/route.ts
â”‚   â”œâ”€â”€ reception/
â”‚   â”‚   â””â”€â”€ checkin/route.ts
â”‚   â””â”€â”€ voice/
â”‚       â””â”€â”€ synthesize/route.ts
â”œâ”€â”€ layout.tsx            # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â””â”€â”€ globals.css

components/
â”œâ”€â”€ reception/            # å—ä»˜ç”»é¢ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ QRReader.tsx
â”‚   â”œâ”€â”€ PatientInfoCard.tsx
â”‚   â””â”€â”€ VoicePlayer.tsx
â”œâ”€â”€ admin/                # ç®¡ç†ç”»é¢ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ Calendar.tsx
â”‚   â”œâ”€â”€ PatientForm.tsx
â”‚   â”œâ”€â”€ ScheduleForm.tsx
â”‚   â”œâ”€â”€ MasterTable.tsx
â”‚   â””â”€â”€ QRCodeDisplay.tsx
â””â”€â”€ ui/                   # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”œâ”€â”€ Button.tsx
    â”œâ”€â”€ Input.tsx
    â”œâ”€â”€ Select.tsx
    â”œâ”€â”€ Modal.tsx
    â”œâ”€â”€ Table.tsx
    â”œâ”€â”€ Pagination.tsx
    â””â”€â”€ Toast.tsx

lib/
â”œâ”€â”€ prisma.ts            # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ auth.ts              # èªè¨¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ voice.ts             # éŸ³å£°åˆæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ utils.ts             # æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

types/
â””â”€â”€ index.ts             # å‹å®šç¾©
```

### 6.2 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 6.2.1 Calendar ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
interface CalendarProps {
  schedules: ScheduleWithRelations[];
  view: 'month' | 'week' | 'day';
  currentDate: Date;
  onDateChange: (date: Date) => void;
  onScheduleClick: (schedule: ScheduleWithRelations) => void;
  onSlotClick: (date: Date, time?: string) => void;
}

// æ©Ÿèƒ½:
// - æœˆ/é€±/æ—¥è¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆ
// - äºˆç´„ã®è¡¨ç¤ºï¼ˆè‰²åˆ†ã‘ï¼šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ï¼‰
// - äºˆç´„ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ç”»é¢ã¸é·ç§»
// - ç©ºãã‚¹ãƒ­ãƒƒãƒˆã‚¯ãƒªãƒƒã‚¯ã§æ–°è¦äºˆç´„ä½œæˆ
```

#### 6.2.2 PatientForm ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
interface PatientFormProps {
  patient?: Patient;  // ç·¨é›†æ™‚ã¯æ—¢å­˜ãƒ‡ãƒ¼ã‚¿
  onSubmit: (data: PatientFormData) => Promise<void>;
  onCancel: () => void;
}

interface PatientFormData {
  patientCode: string;
  name: string;
  nameKana: string;
  voiceTemplate?: string;
  printTemplate?: string;
}

// æ©Ÿèƒ½:
// - æ‚£è€…æƒ…å ±ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
// - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ‚£è€…IDé‡è¤‡ãƒã‚§ãƒƒã‚¯ç­‰ï¼‰
// - ç™»éŒ²/æ›´æ–°å‡¦ç†
```

#### 6.2.3 ScheduleForm ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
interface ScheduleFormProps {
  schedule?: ScheduleWithRelations;  // ç·¨é›†æ™‚
  initialDate?: Date;                // æ–°è¦ä½œæˆæ™‚ã®åˆæœŸæ—¥ä»˜
  onSubmit: (data: ScheduleFormData) => Promise<void>;
  onCancel: () => void;
}

interface ScheduleFormData {
  patientId: number;
  date: Date;
  startTime: string;
  endTime?: string;
  departmentId: number;
  doctorId: number;
  waitingAreaId: number;
  examinationIds: number[];
  note?: string;
}

// æ©Ÿèƒ½:
// - æ‚£è€…é¸æŠï¼ˆæ¤œç´¢å¯èƒ½ãªã‚»ãƒ¬ã‚¯ãƒˆï¼‰
// - æ—¥æ™‚é¸æŠ
// - ãƒã‚¹ã‚¿ã‹ã‚‰ã®é¸æŠï¼ˆè¨ºå¯Ÿç§‘â†’æ‹…å½“åŒ»ã¯é€£å‹•ï¼‰
// - æ¤œæŸ»é …ç›®ã®è¤‡æ•°é¸æŠ
```

---

## 7. èªè¨¼è¨­è¨ˆ

### 7.1 èªè¨¼æ–¹å¼

- **æ–¹å¼**: JWTï¼ˆJSON Web Tokenï¼‰ã‚’HttpOnly Cookieã«ä¿å­˜
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé–“**: 8æ™‚é–“
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä¿å­˜**: bcryptã§ãƒãƒƒã‚·ãƒ¥åŒ–

### 7.2 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
1. ãƒ­ã‚°ã‚¤ãƒ³
   POST /api/auth/login { username, password }
   â†“
   ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ï¼ˆbcrypt.compareï¼‰
   â†“
   JWTç”Ÿæˆï¼ˆæœ‰åŠ¹æœŸé™8æ™‚é–“ï¼‰
   â†“
   HttpOnly Cookieã«ã‚»ãƒƒãƒˆ
   â†“
   æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹

2. èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆå„APIãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
   ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ Cookieã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
   â†“
   JWTæ¤œè¨¼ï¼ˆæœ‰åŠ¹æœŸé™ã€ç½²åï¼‰
   â†“
   æœ‰åŠ¹: å‡¦ç†ç¶šè¡Œ / ç„¡åŠ¹: 401 Unauthorized

3. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
   POST /api/auth/logout
   â†“
   Cookieå‰Šé™¤
```

### 7.3 åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰

- ç’°å¢ƒå¤‰æ•° `ADMIN_INITIAL_PASSWORD` ã§è¨­å®š
- åˆå›èµ·å‹•æ™‚ã«Adminãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
- ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«å¤‰æ›´ã‚’æ¨å¥¨

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 8.1 ãƒ‡ãƒ¼ã‚¿ä¿è­·

| å¯¾ç­– | å®Ÿè£… |
|------|------|
| **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³** | Prisma ORMã«ã‚ˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒª |
| **XSS** | Reactã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã€CSPè¨­å®š |
| **CSRF** | SameSite Cookieå±æ€§ |
| **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** | bcryptãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆã‚½ãƒ«ãƒˆè‡ªå‹•ç”Ÿæˆï¼‰ |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³** | HttpOnly, Secure Cookie |

### 8.2 ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

| ãƒ‘ã‚¹ | ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ |
|------|------------|
| `/` | èªè¨¼ä¸è¦ï¼ˆå—ä»˜ç”»é¢ï¼‰ |
| `/admin/login` | èªè¨¼ä¸è¦ |
| `/admin/*` | èªè¨¼å¿…è¦ï¼ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ãƒã‚§ãƒƒã‚¯ï¼‰ |
| `/api/reception/*` | èªè¨¼ä¸è¦ |
| `/api/voice/*` | èªè¨¼ä¸è¦ |
| `/api/*` | èªè¨¼å¿…è¦ |

### 8.3 æ‚£è€…æƒ…å ±ä¿è­·

- å—ä»˜ç”»é¢ã®æ‚£è€…æƒ…å ±ã¯30ç§’ã§è‡ªå‹•ã‚¯ãƒªã‚¢
- ãƒ­ã‚°ã«æ‚£è€…IDã®ã¿è¨˜éŒ²ï¼ˆæ°åã¯è¨˜éŒ²ã—ãªã„ï¼‰
- SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™è¨­å®šï¼‰

---

## 9. ç’°å¢ƒå¤‰æ•°

```env
# .env.local

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
DATABASE_URL="file:./prisma/medi_q.db"

# èªè¨¼
JWT_SECRET="your-secret-key-here-change-in-production"
ADMIN_INITIAL_PASSWORD="admin123"

# éŸ³å£°åˆæˆ
VOICEVOX_API_URL="http://localhost:50021"

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
NEXT_PUBLIC_APP_NAME="Medi_Q"
```

---

## 10. ãƒ‡ãƒ—ãƒ­ã‚¤è¨­è¨ˆ

### 10.1 ãƒ­ãƒ¼ã‚«ãƒ«é‹ç”¨ï¼ˆæ¨å¥¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å—ä»˜ç«¯æœ«ï¼ˆWindows PCï¼‰            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³            â”‚   â”‚
â”‚  â”‚  (npm run start ã¾ãŸã¯ pm2)          â”‚   â”‚
â”‚  â”‚  - ãƒãƒ¼ãƒˆ: 3000                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  VOICEVOX Engine                    â”‚   â”‚
â”‚  â”‚  - ãƒãƒ¼ãƒˆ: 50021                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹                 â”‚   â”‚
â”‚  â”‚  - prisma/medi_q.db                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```powershell
# start-mediq.ps1

# VOICEVOX Engineèµ·å‹•
Start-Process -FilePath "C:\VOICEVOX\run.exe" -WindowStyle Minimized

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
cd C:\MediQ
npm run start
```

### 10.3 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

```powershell
# backup.ps1

$date = Get-Date -Format "yyyyMMdd_HHmmss"
$backupDir = "C:\MediQ\backups"
$dbPath = "C:\MediQ\prisma\medi_q.db"

Copy-Item $dbPath "$backupDir\medi_q_$date.db"

# 7æ—¥ä»¥ä¸Šå‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤
Get-ChildItem $backupDir -Filter "*.db" |
  Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-7) } |
  Remove-Item
```

---

## 11. é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 11.1 å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

- Node.js 18.x ä»¥ä¸Š
- npm ã¾ãŸã¯ pnpm
- VOICEVOX Engine

### 11.2 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

```bash
# 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env.local
# .env.localã‚’ç·¨é›†

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
npx prisma migrate dev --name init
npx prisma db seed

# 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# 5. VOICEVOX Engineèµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
# Windowsã®å ´åˆ: VOICEVOX\run.exe
```

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | ä½œæˆè€… |
|------|-----------|---------|--------|
| 2025-11-14 | 1.0 | åˆç‰ˆä½œæˆï¼ˆGoogle Calendaré€£æºç‰ˆï¼‰ | Claude |
| 2025-11-30 | 2.0 | SQLite + Prismaç‰ˆã«å…¨é¢æ”¹è¨‚ | Claude |
